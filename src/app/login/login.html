<div class="min-vh-100 d-flex align-items-center justify-content-center bg-white">
  <!-- Notification -->
  @if (showNotification) {
    <div class="alert position-fixed top-0 end-0 m-3"
         [class.alert-success]="notificationType === 'success'"
         [class.alert-danger]="notificationType === 'error'"
         style="z-index: 1050; min-width: 300px;">
      @if (notificationType === 'success') {
        <i class="fas fa-check-circle me-2"></i>
      }
      @if (notificationType === 'error') {
        <i class="fas fa-exclamation-circle me-2"></i>
      }
      {{ notificationMessage }}
    </div>
  }

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        
        <!-- Login Type Selection -->
        @if (!showForm) {
          <div class="card shadow-lg">
            <div class="card-header bg-white text-center py-4 border-bottom">
              <h2 class="mb-0">
                <i class="fas fa-shield-alt text-primary me-2"></i>
                Insurance Login
              </h2>
              <p class="mb-0 text-muted">Choose your login type</p>
            </div>
            <div class="card-body p-4">
              <div class="d-grid gap-3">
                <button class="btn btn-dark btn-lg" (click)="goToCustomerLogin()">
                  <i class="fas fa-user me-2"></i>
                  Customer Login
                </button>
                <button class="btn btn-secondary btn-lg" (click)="goToAgentLogin()">
                  <i class="fas fa-user-tie me-2"></i>
                  Agent Login
                </button>
              </div>
              <hr class="my-4">
              <div class="text-center">
                <p class="mb-2">Don't have an account?</p>
                <button class="btn btn-link" (click)="navigateToSignup()">
                  <i class="fas fa-user-plus me-1"></i>Sign Up
                </button>
              </div>
            </div>
            <div class="card-footer text-center bg-white border-top">
              <button class="btn btn-sm btn-outline-primary" (click)="navigateToHome()">
                <i class="fas fa-home me-1"></i>Back to Home
              </button>
            </div>
          </div>
        }

        <!-- Login Form -->
        @if (showForm) {
          <div class="card shadow-lg">
            <div class="card-header bg-white text-center py-4 border-bottom">
              <h3 class="mb-0">
                @if (loginType === 'agent') {
                  <i class="fas fa-user-tie text-secondary me-2"></i>
                }
                @if (loginType === 'customer') {
                  <i class="fas fa-user text-dark me-2"></i>
                }
                {{ loginType === 'agent' ? 'Agent' : 'Customer' }} Login
              </h3>
            </div>
            <div class="card-body p-5">
              <form (ngSubmit)="onLogin()">
                <div class="mb-4">
                  <label for="email" class="form-label fw-bold">Email Address</label>
                  <div class="input-group input-group-lg">
                    <span class="input-group-text">
                      <i class="fas fa-envelope"></i>
                    </span>
                    <input
                      type="email"
                      id="email"
                      class="form-control"
                      [(ngModel)]="email"
                      name="email"
                      placeholder="Enter your email"
                      required>
                  </div>
                </div>

                <div class="mb-5">
                  <label for="password" class="form-label fw-bold">Password</label>
                  <div class="input-group input-group-lg">
                    <span class="input-group-text">
                      <i class="fas fa-lock"></i>
                    </span>
                    <input
                      [type]="showPassword ? 'text' : 'password'"
                      id="password"
                      class="form-control"
                      [(ngModel)]="password"
                      name="password"
                      placeholder="Enter your password"
                      required>
                    <button
                      type="button"
                      class="btn btn-outline-secondary"
                      (click)="togglePassword()">
                      <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </button>
                  </div>
                </div>

                <div class="d-grid gap-2">
                  <button
                    type="submit"
                    class="btn btn-lg"
                    [class.btn-secondary]="loginType === 'agent'"
                    [class.btn-dark]="loginType === 'customer'"
                    [disabled]="isLoading">
                    @if (isLoading) {
                      <span class="spinner-border spinner-border-sm me-2"></span>
                    } @else {
                      <i class="fas fa-sign-in-alt me-2"></i>
                    }
                    {{ isLoading ? 'Signing In...' : 'Sign In' }}
                  </button>
                  
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    (click)="showForm = false">
                    <i class="fas fa-arrow-left me-2"></i>
                    Back to Login Options
                  </button>
                </div>
              </form>
            </div>
            <div class="card-footer text-center bg-white border-top">
              <small class="text-muted">
                Logging in as {{ loginType === 'agent' ? 'Agent' : 'Customer' }}
              </small>
            </div>
          </div>
        }

      </div>
    </div>
  </div>
</div>